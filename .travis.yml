sudo: false
cache:
  directories:
  - "$HOME/.m2/repository"
  - "$HOME/.sonar"
language: java
jdk:
- oraclejdk7
- oraclejdk8
notifications:
  email:
    recipients:
    - ldp4j-commits@googlegroups.com
    on_success: always
    on_failure: always
before_install:
- if [[ -a .git/shallow ]]; then git fetch --unshallow; fi
before_script:
- openssl aes-256-cbc -pass pass:$ENCRYPTION_PASSWORD -in target/config/ci/secring.gpg.enc
  -out local.secring.gpg -d
- openssl aes-256-cbc -pass pass:$ENCRYPTION_PASSWORD -in target/config/ci/pubring.gpg.enc
  -out local.pubring.gpg -d
script:
- if [ ${TRAVIS_BRANCH} == 'master' ] && [ ${TRAVIS_PULL_REQUEST} = 'false' ]; then
  mvn clean deploy -B -Dcodebase.directory=`pwd` -Dcoverage.reports.dir=`pwd`/target/all
  --settings target/config/ci/settings.xml; else mvn clean install -B
  -Dcoverage.reports.dir=`pwd`/target/all --settings target/config/ci/settings.xml;
  fi
- if [ ${TRAVIS_PULL_REQUEST} = 'false' ]; then mvn sonar:sonar -B -Dsonar.branch=$TRAVIS_BRANCH
  -Dcoverage.reports.dir=`pwd`/target/all --settings target/config/ci/settings.xml;
  fi
- mkdir /tmp/cache-trick
- mv $HOME/.m2/repository/org/ldp4j /tmp/cache-trick/
env:
  global:
  - secure: hl7wTA1+6pJ3TlGUG7xJKhtUsJ3uO4S14Lgcj3c4oGcOr6/as+rHFig4VuVptvqBKEM2xCMrQtyAQB3QaiPFsbrXNGZpAtLcYUSroRQqgvtegCPaWdrEJJzEEA/ssghmycJ81iHtPVTm4oTk0vzOXHc7GJqO5D911yXtqOaZyJCSnaDQXQ2Ac8jyxj4lgl5Hd7yubn5Vr8BHyrXkaye0d9hdIUN3aVQQAg7Kc62XdfhrrGMzCmnAbgBkrbrqnhZfGjQt2QntsUZJ3kZy1F52XSKafH4UK1xv7jhjDVymhqhyFIxIZdu1AN05b6rxAVWseDv3eE3k6yXe9jb4pGmHqCDCS1d8aldMTU9t8BK4ZHLZHQeCF9CiU0oWEn/sxaUjlsn5sJFV4LCQ/LuFzxmho+EQyaGxngDQ3sI7rRWjBQ0IP/aDYWdc7xzT9UlebnjMwya5kNgRcUC+hdwUKlzyMLvhcVFl/RwJjLkBr6CqDeRUV9Ui01ei+/qYWYfL79XQI1iwnnWlYxFgZomL/v8w9VnNiDpTNMfCVFyWvD26K7PXYevxHdjzc+99uBds6Fkm6t/1HhBL7v9g28vYdpKAk4q0N8P/qKnFJFx8LW3rboO9NGD410EHeb8nsYhO7yJSLhp6Du+EZQM8HYjHm/fRGhy6v91774LrZPiDfIQmuGE=
  - secure: b2M3gvltDmUPeGvWYrH8ychkALqAQGNYrZ4PJQ56fAPPQZVOrTRZnElvxekxXnMmrNsUFq1XbhNckZ9k6pVlv2jEDbAuEIKBvkeN0iY0z6SdvB7nlBQUwCW8ZtOfnTEiOPmCaY3XyL0tV2mrpRYutAXx6yMB/n9/9yXbTbt3ZuEIr9txmlVlY9+BxgoC1KApOy+yC1q51mggvjsa/jM3QE8FPYdVMYKJOKPFoaVUePS1MfEfVrePEyqFj3s35nnoFd5ayIe+rtXDHnGuPm0WL/+x23J86td0YrCYftZpskpXKbhtbpC2wXIQ5qrkC5ZStogjKNZDlA+iz6Tc8leafzn2hOMHVJp4f9Hnq2RaviUjfzVXuPOXkq2XQw8/H1Y8BxsVJxv4SXKLjNhq0woSSrzecbWqX0gEvoEB9PPVewSr/vrBBSu7e4l7yybCcbPFw07FWQiPruX/Ld0DGqH2//NS2YHYImmdgnb/XWOfGmp/vvTdE+zPueiIQcHAgZcGDDGFOQfVwOahmbuK/UWTz8biGmBF/cNWOeY6ueU4OSiN7Lit9MbLxjzMOQHTdYPxynBq/tOTJjTRhZZIQ9YkuH4Wi/3dd08IHAhCIHKcaGzD6hDqN3QSiMDCfdnkRE/5NB31NQ8wHUQtAMjY8afN1pXk3zkDQSr7IBB0xD1ibow=
  - secure: Cm9zl5RpGjqSYELRwQZUMpQpjrnGyqY1spkL9/9SOyyaYsQYVC1zZEKm91oz/TPQXZGW/v4mahEntu1jo1L9sKaFQc0E8JAr7SUd5KhmfVte73NSQCCfbCy8g4CV65sVLzDTOic3TMppQWew8BXOdNg8YzkTB5ULX91W9ncexMA7qDA3pGPh9ogmI1rty11HeLzHRH0XiFYHyHZObjani0X6zhbWWLsu8p8DOUEgbsdF/iJnMQThqZBxtQul9wvvjiPgIN3lrcr6LUh4a0uJZq33tTJmqJ2b9VaXh82QzZqhAP+Snlw7y2oWMFsKpZHtS0u2GSChUfurOXJG2GeKnsf2ZW0McEczRzidJS6ij6747lUdox1pMiBzZVb7ZRi5v4j8fm3pXii1XCHrLTB/UJW6netZ8Kh5Mbpuc6H1EDXFM8eShCjHaRvc2l5UnJ2XVRqYmwv63uw5+vAAEGxi9ASyC6sqFh+qJw2DObxbU5TfubTDsllVjqK8xeDQ+ULfjf8Ot3MapS3HjC+STDALFDmoMAQuRtQZPYvo//35ouMWRArlrO6csTSkKCgD+vle22asUO8bSqR0mI1aGCbTZqK1IkKPe9IGmBOdF0zRyQM/gzTZdCFCCP727Gjief7v+DokpeZClW2sV91tS1TuNGU22aa1c6WwIwA2YhmlKZw=
  - secure: huoXv58A79UMmLhXda9xlsPYXO/K0z/rgiCAHCgPa0tFa2TL4M7wwMDzaC/+hpFICal5/50RzQ8dD8t1bvM6s2sE/TDZ+auAQ3qGCkfA9T1JQ6ypRxyBqW/hETO+WHdipCIdGozFpxgTcj5Sxc7wxaQcCunRuO5IyDDVim6ReyZRrngW+7jq3PJCvL3KCwIb8vMivpzYSb/kHFKXL7jzue1b3nhj6TZjIzuKI5n6WOthPIzd9f6xDx23ij4mE0nezr9QVz87l508tCSy60O7klj1DznHv6lzNX6PHzqeLubEEUbk9RR+6CPAo6BVR/m0DG+27Mx6o6iKVcypsTz1pTZNMSu2sQWkvKBRtAZSiDqZcpNh15cL5WT748LvavI4xa4gne3XrBKDOU3SYPZqRzEE1s37Mus5OD6cbsO96fHjbYipzhf5Ve2stbDvoL+xNgl5zB5eRhUirwaZJq4hScfVUWsjDZb6+zgJ7MBHnb8o9405Or3wxo+Z9bCMap+Sl80tP0f30SbqiQhBmn+tb3qVQWuaWzJuJ3PAdS8LQmolRVjbbCbhXxCDuQOA7WoFoMHlGQL4wavlxqa/gT0pkxJADYkoho5B9MKtV6d552NNdbSjwCd+g5/vPH5FJwjlj3xdOEriSUIOx8/IIjoljOr9XIspL587xj1GBNRoIls=
  - secure: YN/hl6g4bNg3fJkPNWe1l2NmZBSk2hbrfXYEKWcLg7EMaggkWdrJZmi85iQHYETaCY0YY8SUQqUQEZbFfPua2WOFPSkLtRzpQLX7juZiRcw2RIflWNhg2jLv1E1ltuxHRNU4ZUpc7efziRL8mITFaZ43pzEekxPW3n0M2pI5kdPmQKmK4Rxh/P3spa4FC/YOuZuSOT3mKd/VM+cn9iAU2o8DSCLcYiiQFy+FYwYo6gyJHqiD3mzuzBlSmiaY281KGN/nypqG6cYVcR5fddd7JI+KVrxebpaNyoGchUguq72vRw6TcCohEggQ+0bRhYYBCqh/tUxsnTy59paR7m02ikGWnnTF119mRiDRjw4uWZeajFpxKPpgEEDwjhVXxSvQU0Ws6P3GYOEiPYmnvt7PxGkw4P12XJjYFexpgz1Th+Fa1wDzLkFI0Ejqgiq1wqHULDkoUrZ7H5xb6CfDShnrbN1IBLFy/CM/64WlD/jZ12vHiv4mO4TYXLBv7ZpEApIBuMFC+D1WpHdlZtOc+5wa246/QuMqeiA+4nNra6+/ql9ZoJLHEpobT7UBW8XbidrYHpNnYaym3fRXWTVtRFXCGSTuqGJdHidwj/X5Yb2qPxF+//gMVWhhRflCAi9fNtsf3PSrjQYem1xDbCVuTjhHNYlgALiGRBx7+qV9tJxP7Qo=
  - secure: WaOVPF5/2E/mIP/nej1aitxU0o01diyKrcXeSSDA7RRil1wDNYgyeXAdckrh3vE42HxPUMlIdp5fbMKtMVIWSD4f9I0OjsRl0HjWZ3KxIi+axjkn31hWSp8RyrjcL713sjwq2SMeyAvYTGaeTwD+twK2umAnNf9nIvqqED+4IUiF7Kbwe9yYBrn/5+huIaQsOB20k4/AxWJ3PE1QkaWOC/0lbzml7K4efWow30IQfYZeQm9yp/oyX+/EMuQtZ1p8mQZ5ZO+PuChTcMEVVBYOQbMor8/kvDtKRMh+ynkp7bh6/bGoQjVL+5STWIQzfAPW5b+55JvuR4PzEfI18xDrY9wQJ+gQE2FQsz25Fe3C2qZBD8PLT/TBmfj/fLncxp4/B7AZq5nBVzgedG4q+z0POsBRSGFLiTh0zyKXw7Xdvxu17LrqNqVv9oDC0ogZiFesf4pIc+j3kDpSiRhUoM37Ga4XL/TKWP2pYvqfiixRv+4mwzAV5XmS7oypgKyTNZlKCOwXDqkRArC0uy6pnsR8XPGxmLnk8pRlFiG0RLZIrG+AgOqsuQaIYgt9DqU3LDVKXVTKlQOB4smvt5Menx8IZUzqGWHc0MfMD5zHLitVBRBKn11mItmiCdKEmSREac05eb03TLm3jyaILiL0oYLqiQfDH/5bB3JvLFS7HqbRZYU=
  - secure: lJUAxV62CmSSVahI8XkNpC9gua27QUR/Emfiaa7j2FJym46cwYxuPUVIKEqQw9KPptb8QsXPXyOFWAIvWS7ql5NeQWcDMJsMAWChvuzfoT/JXf+Sk5PTwl/NyuC66voCeHKdhR2ynfTn5i4FgfCTtgAcwhrIxxaHzhuTkfkzsF4/2rn5tsTq0ORB5MxfXh0TjvU7EicWYDc6AkEgvDZflFMnRsfYaOkgT3MZFFPEN7eKTAhcRmEn/qV5hOXEqY/p+hgoS9peNSiEqzkcZLBhgkFHWtgsVT0PQ8D/7SUTqbVUwvTATZnMjxWXWGGMp6ViAjwTGc/SzVq7SxpwVBls0gsqQ5It8Uo9/fRqJJ/CgVHihrNB0eIkjP5LJzWFDzTzslBDufiEG/vnNrnQEuQ3WSgavg3Q4ptO3vhTQCIv70xxScEft6AzRoHsQxDtFQmujPAviACyXb8lKsVw0jxCwCKFCVKWxGWfeFvzD3qonypEzqyRfGSIMBLC18owLuz1kJCHgN6k4OHUv/9jGqjKFeb1X9Vurd8SF3QSVCynBOIVPyBs8GGoZ782udD3Js+3w7Jm5Mw7GOxnP/2JJED3bcHg0jCiW6jSVveriwxvJWaWvoqvEbxjSaK6+X3rbKPLa5rkLl6fgh0SrKrKbs2jgugscLJsjBDvPvRqeAb91IA=
  - secure: YZTrPgzPF53OmHRz48gVcUE24kLVX3KlVtaKw/E05jVuuJBH/SkdZ48UzHk7odOTHBfu4lbvMV6dcOzZOoj9BxAtG4aQ+KNFrHmOADB9g5dC+VWtqNQqONYC1xq+hnzSTQEcE8NKDb7lyQ4ZAnN2nrXKBxW3zb2r6xG58Vsim+3u3Jq0kvQKpUDn9535FjqAOOWfnTQ3MUtToSnJIIvJA3NnD2OIVBs9SNkU1pysOhJCQe1kpIaYFIEDgeaAx9mhEB0bxAMzPaNUN1cUDeHOk5g/4NpU7tr2SqN9JXKoWrhrkbDF6tIxPJF+lDFRaDywgqc/mn4zPrn5zvukl+4DhqbSJIO3AzeKMsWE4Dp0MFs+TuZ7Gf9y6TDSXN82g8OLUwEtDrMsyXCbJZc0U2j7xv0xwJm6YvYpyDC7u2FhnPF+LXUCVpP+cgwLBmzb0K6y5ma77McSQeX3PxEDkp+1l/VNQtKnYIAM3ISbXXV6Kfe3CfzojHW67J0Tl25DQSeUT47z9c2or8zcBLMTfiO7+cJJc7VhtTty/IvJdMuxhoQbF5pFasCL+TN5H925p/hHFyL6hiP7UySOSGVG+1g6uaXhj2RWgDNWtrSOuEJVvwXXsE7yFCS65z3JxlDL1vvGoEBNrmcYWKAf/WHQ2wuNyPGoyD9sWRiW6Tc3u6D0ENk=
  - secure: g54ZQGwtMK8YTs2vuc4IrT6ZK1dbiLCvo1GSWx7OIowPhPHe8CHw7EhXXTKLgPJY4+OHmd/BoqPMbXAwreu5W4zIHRxlEKO2+CyitvkdO68AM562c8rciy+dEXW061sJ5o8vWRnjLwSqcffAjdIFoPRFKUmvljUMSVw7oNTBLtBu7cibLjtH7csRReTrxglVP7j6GfYCsxUTH2ttuGbECqqFqtB4odkaj9vrt+m+p8dSWxAKdqLpAhRfnmrRKY+GIEFurMPmwNvzCgXAGOm/NyjSF6c8py6j/feSCzI0TPmYNh1IMb/MvdQsy0BN1HqaDY8dDQjOnR9iHciu/BBbT/DK9Rcb6kzc3rfj7CIPoLskjMpWMMMoqMeZg3V5ZdG+C7RG2hxU3eiLsNxVtQY5m+aL26r2UHDfbMe24fTXniwqnuZv9b0Bpt2Rcwugg6wcvWdtIs1hBEGrizh85FKYsFT/6tvflAd+6jTv97CQTaFXREfBTBnQB/d1BcpyBFal9X4kvQpK5CwIJpTvMLErJmDBBbUZ6NWae7fdapKjCu9QhwWajFdYMIcsaqRO4yn1gg4r3NKMUlK8SPPdoP++cphA8C4GG6Kiz1kzQjIyhvIw+tfwYfiut9KqyQK+AvSQF5/6+ZFqis9UnhN3lpKT26RmlFlRkHr2t4ychBI7LuU=
